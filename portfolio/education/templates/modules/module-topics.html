{% extends "content.html" %}

{% block content %}
<div class="heading right-link">
    <h1>{{ module.code }} - {{ module.name }}</h1>
    {% if current_user.is_authenticated %}
    <a href="{{ url_for('bp_education.edit_module', code=module.code) }}" class="button">Edit Module</a>
    <a href="{{ url_for('bp_education.new_topic', code=module.code) }}" class="button">New Topic</a>
    {% endif %}
</div>

<p>{{ module.description }}</p>
{% if module.topics | selectattr("draft", "equalto", 0) | list | count > 0 or (current_user.is_authenticated and module.topics | list | count > 0) %}
<p>Below are a list of topics that were covered in this module:</p>
<ul>
    {% for topic in module.topics %}
    {% if not topic.draft or current_user.is_authenticated %}
    <li>{% if topic.draft %}Draft - {% endif %}<a href="{{ url_for('bp_education.view_topic', title=topic.title) }}">{{ topic.title }}</a></li>
    {% endif %}
    {% endfor %}
</ul>
{% else %}
<p>There are currently no topics to view for this module.</p>
{% endif %}
{% endblock content %}
